!function(e){function t(t){for(var i,a,c=t[0],s=t[1],u=t[2],f=0,p=[];f<c.length;f++)a=c[f],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&p.push(r[a][0]),r[a]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i]);for(l&&l(t);p.length;)p.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,c=1;c<n.length;c++){var s=n[c];0!==r[s]&&(i=!1)}i&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var i={},r={0:0},o=[];function a(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=i,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=s;o.push([121,1]),n()}({121:function(e,t,n){n(122),e.exports=n(309)},308:function(e,t,n){},309:function(e,t,n){"use strict";var i,r,o;n.r(t),n.d(t,"startBtn",(function(){return N}));try{i=new(window.AudioContext||window.webkitAudioContext)}catch(e){window.alert("Извините, но ваш браузер не поддерживает Web Audio API!")}function a(e,t,n){!function(e,t,n){(function(){r=i.createBufferSource(),s.map((function(e){"background"===e.type&&(r.buffer=e.buffer)})),r.loop=!0,r.loopStart=0,r.loopEnd=r.buffer.duration;var e=i.createGain();e.gain.value=.08,r.connect(e),e.connect(i.destination)})(),function(e,t,n){o=i.createBufferSource(),s.map((function(e){"basis"===e.type&&(o.buffer=e.buffer)}));var r=i.currentTime,a=i.createGain();o.loop=!0,o.loopStart=0,o.loopEnd=n,o.connect(a);for(var c=t/n,u=0;u<c;u++)for(var l=0;l<e.length;l++){var f=e[l].value,p=f/3;a.gain.linearRampToValueAtTime(0,r),a.gain.linearRampToValueAtTime(1,r+p),a.gain.linearRampToValueAtTime(1,r+f-2*p),a.gain.linearRampToValueAtTime(0,r+f),r+=f+1}a.connect(i.destination)}(e,t,n),o.start(0),r.start(0)}(e,t*=60,n)}function c(){o.stop(0),r.stop(0)}var s=[];function u(e,t){fetch(e).then((function(e){return e.arrayBuffer()})).then((function(e){i.decodeAudioData(e,(function(e){s.push({type:t,buffer:e}),s.length>1&&N()}))}))}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function f(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}u("./background.mp3","background"),u("./tibe.mp3","basis");var p=new WeakSet,d=new WeakSet,h=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d.add(this),p.add(this),this.$el=document.querySelector(t),this.options=n,this.presets=n.counterPresets,this.currentPreset=0,f(this,p,v).call(this),f(this,d,m).call(this)}var t,n,i;return t=e,(n=[{key:"click",value:function(e){this.$el.addEventListener("click",e)}},{key:"clickHandler",value:function(e){var t=e.target.dataset,n=t.type,i=t.id;"name"===n&&(this.currentPreset=this.presets.find((function(e){return e.id==i})).value)}},{key:"toggle",value:function(){this.isOpen?this.close():this.open()}},{key:"open",value:function(){this.$el.classList.add("open")}},{key:"close",value:function(){this.$el.classList.remove("open")}},{key:"destroy",value:function(){this.$el.removeEventListener("click",this.clickHandler),this.$el.innerHTML=""}},{key:"isOpen",get:function(){return this.$el.classList.contains("open")}},{key:"current",get:function(){return this.currentPreset?this.currentPreset:"Нет текущего выбора"}}])&&l(t.prototype,n),i&&l(t,i),e}(),v=function(){var e,t;this.$el.classList.add("header__menu"),this.$el.innerHTML=(e=this.presets,t=e.map((function(e){return'\n    <li data-type="name" data-id="'.concat(e.id,'">').concat(e.name,"</li>\n  ")})),'\n    <h3>Breathing patterns</h3>\n    <ul class="header__list">\n      '.concat(t.join(""),"\n    </ul>\n "))},m=function(){this.clickHandler=this.clickHandler.bind(this),this.$el.addEventListener("click",this.clickHandler)};function y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function b(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var g=new WeakSet,k=new WeakSet,w=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),k.add(this),g.add(this),this.$el=document.querySelector(t),this.options=n,this.timer=n.timer,this.preset=n.preset,this.circleTime=0,this.isRunning=!1,this.avgBreaths=0,b(this,g,T).call(this),b(this,k,x).call(this)}var t,n,i;return t=e,(n=[{key:"clickHandler",value:function(e){var t=e.target.dataset,n=t.type,i=t.id;"timeUp"===n?this.timer+=1:"timeDown"===n?this.timer>1&&(this.timer-=1):"plus"===n?this.preset=this.preset.map((function(e){return e.id===i&&(e.value+=1),e})):"minus"===n&&(this.preset=this.preset.map((function(e){return e.id===i&&e.value>0&&(e.value-=1),e}))),b(this,g,T).call(this)}},{key:"setPattern",value:function(e){this.preset.map((function(t,n){return t.value=+e[n],t})),b(this,g,T).call(this)}},{key:"setCircleTime",value:function(){var e=0;this.preset.forEach((function(t){e+=t.value,t.value>0&&e++})),this.circleTime=e}},{key:"setAvg",value:function(){this.avgBreaths=(60/this.circleTime).toFixed(2)}},{key:"disable",value:function(){this.$el.removeEventListener("click",this.clickHandler)}},{key:"enable",value:function(){this.$el.addEventListener("click",this.clickHandler)}},{key:"destroy",value:function(){this.$el.removeEventListener("click",this.clickHandler),this.$el.innerHTML=""}},{key:"run",set:function(e){return this.isRunning=e}},{key:"avg",get:function(){return this.avgBreaths}}])&&y(t.prototype,n),i&&y(t,i),e}(),T=function(){var e,t,n,i;this.setCircleTime(),this.setAvg(),this.$el.classList.contains("counter")||this.$el.classList.add("counter"),this.$el.innerHTML=(e=this.timer,t=this.preset,n=this.avgBreaths,i=t.map((function(e){return'\n  <li class="counter__item">\n    <span>'.concat(e.name,'</span> \n    <div>\n      <button class="minus" data-type="minus" data-id="').concat(e.id,'">-</button>\n      <span class="num" data-type="num">').concat(e.value,'</span>\n      <button class="plus" data-type="plus" data-id="').concat(e.id,'">+</button>\n    </div>\n  </li>\n  ')})),"\n    <div><b>".concat(n,'</b> breaths per minute</div>\n    <div class="counter__period" data-type="period">\n      <div class="counter__arrow material-icons" data-type="timeDown">\n        expand_more\n      </div>\n      <div id="timer" class="counter__time">\n          <span id="minutes">').concat(e,'</span>\n          <span>:</span>\n          <span id="seconds">00</span>\n      </div>\n      <div class="counter__arrow material-icons" data-type="timeUp">\n        expand_less\n      </div>\n    </div>\n    <ul class="counter__list">\n       ').concat(i.join(""),"\n    </ul> \n   \n")),console.log("render")},x=function(){this.clickHandler=this.clickHandler.bind(this),this.$el.addEventListener("click",this.clickHandler)};function _(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var S=new WeakSet,$=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),S.add(this),this.$el=document.querySelector(t),this.options=n,this.text=n.text,this.className=n.className,function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(this,S,O).call(this)}var t,n,i;return t=e,(n=[{key:"toHTML",value:function(){return"".concat(this.text)}},{key:"innerText",value:function(e){this.$el.innerText=e}},{key:"click",value:function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];(e=this.$el).addEventListener.apply(e,["click"].concat(n))}},{key:"disable",value:function(){this.$el.disabled="true"}},{key:"enable",value:function(){this.$el.disabled=""}}])&&_(t.prototype,n),i&&_(t,i),e}(),O=function(){this.$el.classList.add(this.className),this.$el.innerHTML=this.toHTML()};function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=R(e);if(t){var r=R(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return H(this,n)}}function H(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(o,e);var t,n,i,r=E(o);function o(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r.call(this,e,t)}return t=o,(n=[{key:"toHTML",value:function(){return"\n        <span></span>\n  "}},{key:"toggle",value:function(){this.isOpen?this.close():this.open()}},{key:"open",value:function(){this.$el.classList.add("open")}},{key:"close",value:function(){this.$el.classList.remove("open")}},{key:"isOpen",get:function(){return this.$el.classList.contains("open")}}])&&P(t.prototype,n),i&&P(t,i),o}($),M=(n(308),new w("#counter",{timer:1,preset:[{id:"1",value:8,name:"inhale"},{id:"2",value:8,name:"retain"},{id:"3",value:8,name:"exhale"},{id:"4",value:3,name:"sustain"}]})),A=new h("#menu",{counterPresets:[{id:"1",name:"minutes breathe",value:"20,20,20,0"},{id:"2",name:"10 breathe",value:"10,10,10,4"},{id:"3",name:"4 breathe",value:"4,4,4,5"},{id:"4",name:"1 test",value:"1,1,1,1"},{id:"5",name:"2 test",value:"2,2,2,2"}]}),B=new C("#menu-btn",{text:"",className:"header__menu-btn"}),q=new $("#button",{text:"loading...",className:"button"});q.disable();var D=document.querySelector("#circle"),W=document.querySelector("#command");function I(){B.toggle(),A.toggle()}function N(){q.enable(),q.innerText("start")}function V(){D.style.cssText="\n    transform: rotate(0); \n    animation: none\n  "}function G(e){M.isRunning&&(W.innerText=e)}B.click(I),A.click((function(){if(M.isRunning)return void I();var e=A.current;e=e.split(","),M.setPattern(e),I()})),q.click((function(){var e=setInterval((function(){var t=function(e){var t=e-Date.now(),n=Math.floor(t/1e3%60),i=Math.floor(t/1e3/60),r=function(e){return e<10?"0".concat(e):e};return{total:t,minutes:r(i),seconds:r(n)}}(o);n.textContent=t.minutes,i.textContent=t.seconds,(o<Date.now()||!M.isRunning)&&(clearInterval(e),V(),c(),q.innerText("start"),M.run=!1,M.enable(),n.textContent=M.timer,i.textContent="00")}),1e3),t=document.querySelector("#timer"),n=t.querySelector("#minutes"),i=t.querySelector("#seconds");if(M.isRunning)return clearInterval(e),function(){var e=window.setTimeout((function(){}),0);for(;e--;)window.clearTimeout(e)}(),V(),q.innerText("start"),M.enable(),c(),M.run=!1,W.innerText="",n.textContent=M.timer,void(i.textContent="00");var r=60*M.timer*1e3,o=Date.now()+r;M.run=!0,function(){var e=60*M.timer/M.circleTime,t=0;function n(){var i=0;setTimeout((function(){return G("Inhale")}),0),i=1e3*M.preset[0].value+1e3,setTimeout((function(){return G("Retain")}),i),i=i+1e3*M.preset[1].value+1e3,setTimeout((function(){return G("Exhale")}),i),i=i+1e3*M.preset[2].value+1e3,setTimeout((function(){return G("Sustain")}),i),i=i+1e3*M.preset[3].value+1e3,t<e&&M.isRunning&&(t++,setTimeout((function(){return n()}),i))}n()}(),a(M.preset,M.timer,M.circleTime),D.style.cssText="\n    transform: rotate(0); \n    animation: circle ".concat(M.circleTime,"s linear infinite\n  "),M.disable(),q.innerText("stop")}))}});